!function o(i,a,r){function s(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,o,i,a,r)}return a[t].exports}for(var d="function"==typeof require&&require,e=0;e<r.length;e++)s(r[e]);return s}({1:[function(e,t,n){(function(n){(function(){"use strict";var e,t=(e="undefined"!=typeof window?window.jQuery:void 0!==n?n.jQuery:null)&&e.__esModule?e:{default:e},r="undefined"!=typeof window?window.peepso:void 0!==n?n.peepso:null;var s=+("undefined"!=typeof window?window.peepsodata:void 0!==n?n.peepsodata:null).profile.id;(0,t.default)(function(){var n,o,i,a=(0,t.default)(".ps-js-profile-completeness");a.length&&(n=a.find(".ps-js-status"),o=a.find(".ps-js-progressbar"),i=a.find(".ps-js-required"),r.hooks.addAction("profile_completeness_updated","page_profile_about",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};+e==s&&(void(e=0)!==t.profile_completeness&&(100<=+t.profile_completeness?(e++,n.hide(),o.hide()):(n.html(t.profile_completeness_message).show(),o.show(),o.children("span").css({width:"".concat(+t.profile_completeness,"%")}))),"undefined"!==t.missing_required&&(+t.missing_required<=0?(e++,i.hide()):i.html(t.missing_required_message).show()),2===e?a.hide():a.show())}))})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){(function(t){(function(){"use strict";var e,a=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},r="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,n="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;(0,a.default)(function(){var e,t,n,o=(0,a.default)("input[name=verify_password]");function i(){var e;o.val().trim().length<5?(t.attr("readonly","readonly"),n.attr("disabled","disabled")):(t.removeAttr("readonly"),e=!1,t.each(function(){if(this.value!==(0,a.default)(this).data("ps-value"))return!(e=!0)}),e?n.removeAttr("disabled"):n.attr("disabled","disabled"))}o.length&&(e=o.closest("form"),t=e.find("input[type=text], input[type=password]").not(o),n=e.find("[type=submit]"),t.each(function(){(0,a.default)(this).data("ps-value",this.value)}),t.filter("input[name=user_nicename]").on("input",function(){var e=this.value.replace(/[^a-z0-9-_\.@]/gi,"");this.value!==e&&(this.value=e)}),o.on("input",i),t.on("input",i),i())}),(0,a.default)(function(){var i;(0,a.default)(".ps-js-profile-delete").on("click",function(e){e.preventDefault(),function(){i||((i=(0,r.dialog)(n.profile.template_profile_deletion,{destroyOnClose:!1}).show()).$el.find("form").on("submit",function(e){return e.preventDefault()}),i.$el.find(".ps-js-cancel").on("click",function(){return i.hide()}),i.$el.find(".ps-js-submit").on("click",function(e){return e=e.currentTarget,t=(0,a.default)(e).attr("disabled","disabled"),n=t.find(".ps-js-loading").show(),o=i.$el.find(".ps-js-error").hide(),e=i.$el.find("input[type=password]").val(),void r.ajax.post("profile.delete_profile",{password:e}).then(function(e){e.success?e.data&&((0,r.dialog)(e.data.messages).show(),setTimeout(function(){return window.location=e.data.url},3e3)):e.errors&&o.html(e.errors[0]).show()}).always(function(){n.hide(),t.removeAttr("disabled")});var t,n,o}));i.$el.find("input[type=password]").val(""),i.$el.find(".ps-js-error").hide(),i.show()}()})}),(0,a.default)(function(){var i;function t(){var e=i.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),n=i.$el.find(".ps-js-error").hide(),o=i.$el.find("input[type=password]").val();r.ajax.post("profile.request_account_data",{password:o}).then(function(e){var t;e.success?e.data&&(t=i.title(),t=(0,r.dialog)(e.data.messages,{title:t}),i.hide(),t.show(),setTimeout(function(){window.location=e.data.url},3e3)):e.errors&&n.html(e.errors[0]).show()}).always(function(){t.hide(),e.removeAttr("disabled")})}(0,a.default)(".ps-js-export-data-request").on("click",function(e){e.preventDefault(),function(){i||((i=(0,r.dialog)(n.profile.template_export_data_request,{destroyOnClose:!1}).show()).$el.find(".ps-js-cancel").on("click",function(){return i.hide()}),i.$el.find(".ps-js-submit").on("click",t),i.$el.find("form").on("submit",function(e){e.preventDefault(),t()}));i.$el.find("input[type=password]").val(""),i.$el.find(".ps-js-error").hide(),i.show()}()})}),(0,a.default)(function(){var i;function t(){var e=i.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),o=i.$el.find(".ps-js-error").hide(),n=i.$el.find("input[type=password]").val();r.ajax.post("profile.download_account_data",{password:n}).then(function(e){var t,n;e.success?e.data&&(t=i.title(),n=(0,r.dialog)(e.data.messages,{title:t}),i.hide(),n.show(),setTimeout(function(){n.hide(),window.location=e.data.url},1500)):e.errors&&o.html(e.errors[0]).show()}).always(function(){t.hide(),e.removeAttr("disabled")})}(0,a.default)(".ps-js-export-data-download").on("click",function(e){e.preventDefault(),function(){i||((i=(0,r.dialog)(n.profile.template_export_data_download,{destroyOnClose:!1}).show()).$el.find(".ps-js-cancel").on("click",function(){return i.hide()}),i.$el.find(".ps-js-submit").on("click",t),i.$el.find("form").on("submit",function(e){e.preventDefault(),t()}));i.$el.find("input[type=password]").val(""),i.$el.find(".ps-js-error").hide(),i.show()}()})}),(0,a.default)(function(){var i;function t(){var e=i.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),n=i.$el.find(".ps-js-error").hide(),o=i.$el.find("input[type=password]").val();r.ajax.post("profile.delete_account_data_archive",{password:o}).then(function(e){var t;e.success?e.data&&(t=i.title(),t=(0,r.dialog)(e.data.messages,{title:t}),i.hide(),t.show(),setTimeout(function(){window.location=e.data.url},3e3)):e.errors&&n.html(e.errors[0]).show()}).always(function(){t.hide(),e.removeAttr("disabled")})}(0,a.default)(".ps-js-export-data-delete").on("click",function(e){e.preventDefault(),function(){i||((i=(0,r.dialog)(n.profile.template_export_data_delete,{destroyOnClose:!1}).show()).$el.find(".ps-js-cancel").on("click",function(){return i.hide()}),i.$el.find(".ps-js-submit").on("click",t),i.$el.find("form").on("submit",function(e){e.preventDefault(),t()}));i.$el.find("input[type=password]").val(""),i.$el.find(".ps-js-error").hide(),i.show()}()})})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){"use strict";e("./about"),e("./notifications"),e("./account")},{"./about":1,"./account":2,"./notifications":4}],4:[function(n,e,t){(function(t){(function(){"use strict";var a=e("undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null),i=e(n("promise/lib/es6-extensions")),r="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;function e(e){return e&&e.__esModule?e:{default:e}}function s(t,n,e){var o=2<arguments.length&&void 0!==e&&e;return new i.default(function(e){e=[t,n,e,o];o?l.unshift(e):l.push(e),setTimeout(c,500)})}function d(e){var t=!(0<arguments.length&&void 0!==e)||e,n=(0,a.default)(".ps-js-preferences-header"),o=(0,a.default)(".ps-js-preferences-button").filter("[data-type=email]"),e=(0,a.default)(".ps-js-notification-option").find("span[data-type=email]");t?(n.parent(".ps-js-notification-option").show(),o.show(),e.show()):(n.parent(".ps-js-notification-option").hide(),o.hide(),e.hide())}function o(e){var t=(0,a.default)(e),n=t.closest(".ps-preferences__checkbox").find("[type=checkbox]").not(t);n.length&&(n[0].checked===t[0].checked||("onsite"===(e=t.closest("span[data-type]").data("type"))&&!t[0].checked||"email"===e&&t[0].checked)&&n.trigger("click"))}var l=[],u=!1,c=function e(){var t,n,o,i,a;l.length&&(u||(n=(t=l.shift())[0],a=t[1],o=[t[2]],i=t[3],a={user_id:r.currentuserid,view_user_id:r.userid,fieldname:n,value:a},!i&&l.length&&(t=l.shift(),a.fieldname_extra=t[0],a.value_extra=t[1],o.push(t[2])),u=!0,peepso.postJson("profilepreferencesajax.save_notifications",a,function(t){u=!1,o.forEach(function(e){return e(t)}),e()})))};(0,a.default)(function(){(0,a.default)(".ps-js-profile-list").on("change","[type=checkbox]",function(){var e=(0,a.default)(this).closest(".ps-js-notification-option").find(".ps-js-loading"),t=e.find("img"),n=e.find("i");n.stop().hide(),t.show(),s((0,a.default)(this).attr("name"),this.checked?1:0).then(function(){t.hide(),n.show().delay(800).fadeOut()}),o(this)});var t=(0,a.default)("select[name=email_intensity]");t.off("change.savepref"),t.on("change",function(){var n=this.value,e=t.next(".ps-js-loading"),o=e.find("img"),i=e.find("i");i.stop().hide(),o.show(),s("email_intensity",n,!0).then(function(e){var t;o.hide(),i.show().delay(800).fadeOut(),e.success&&((e=(t=(0,a.default)("#peepso_email_intensity_descriptions").children()).filter("#peepso_email_intensity_"+n)).length&&(t.not(e).hide(),e.show()),d(0==+n))})}),t.length&&d(0==+t.val());var i=(0,a.default)("input[name=web_push]");i.off("change.savepref"),i.on("change",function(){var e=this.checked?1:0,t=i.closest(".ps-preferences__notification").find(".ps-js-loading"),n=t.find("img"),o=t.find("i");o.stop().hide(),n.show(),s("web_push",e,!0).then(function(e){n.hide(),o.show().delay(800).fadeOut(),e.success&&setTimeout(function(){window.location.reload()},500)})}),(0,a.default)(".ps-preferences__checkbox").children("[data-type=onsite]").find("[type=checkbox]").each(function(){o(this)})})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"promise/lib/es6-extensions":14}],5:[function(e,t,U){(function(E){(function(){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=function(){a||(a=(0,n.dialog)(t.profile.template_avatar,{wide:!0,destroyOnClose:!1}).show(),r=a.$el,r.find(".ps-js-upload").on("click",q),d=function(){var e='<input type="file" name="filedata" accept="'.concat("image/*",'" data-name="').concat("profile-avatar-upload",'" />'),e=(0,s.default)(e).css({position:"absolute",opacity:0,height:1,width:1});return e.appendTo(document.body),e.psFileupload({formData:{user_id:b,_wpnonce:k},dataType:"json",url:Q,replaceFileInput:!1,add:function(e,t){var n=t.files[0];n.type.match(/image\/(jpe?g|png)$/i)?n.size>j?h.html(D).show():(h.hide(),t.submit()):h.html($).show()},done:function(e,t){t=t.result;t.success?(W(t.data&&t.data.image_url,t.data&&t.data.orig_image_url),O=!(M=!0),u.removeAttr("disabled")):t.errors&&h.html(t.errors[0]).show()}}),e}(),l=r.find(".ps-js-remove").on("click",C),r.find(".ps-js-gravatar").on("click",P),u=r.find(".ps-js-submit").on("click",V),c=r.find(".ps-js-btn-crop").on("click",X),f=r.find(".ps-js-btn-crop-cancel").on("click",F),p=r.find(".ps-js-btn-crop-save").on("click",z),h=r.find(".ps-js-error").hide(),r.find(".ps-js-loading").hide(),v=r.find(".ps-js-has-avatar"),w=r.find(".ps-js-no-avatar"),_=r.find(".ps-js-original"),y=r.find(".ps-js-preview"),W.apply(null,A?[t.profile.img_avatar,t.profile.img_avatar_original]:[]),u.attr("disabled","disabled"));return a};var e,s=(e="undefined"!=typeof window?window.jQuery:void 0!==E?E.jQuery:null)&&e.__esModule?e:{default:e},n="undefined"!=typeof window?window.peepso:void 0!==E?E.peepso:null,t="undefined"!=typeof window?window.peepsodata:void 0!==E?E.peepsodata:null;var o,i,a,r,d,l,u,c,f,p,h,v,w,_,y,m,g,j=+peepsodata.upload_size,b=+t.profile.id,x=t.profile.img_avatar_default,k=t.profile.avatar_nonce,Q="".concat(peepsodata.ajaxurl_legacy,"profile.upload_avatar?avatar"),$=t.profile.text_error_filetype,D=t.profile.text_error_filesize,A=+t.profile.has_avatar,M=!1,O=!1,T=null;function W(e,t){var n;e?(l.show(),w.hide(),v.show(),n="?nocache-"+(new Date).getTime(),A=!0,o=e,y.attr("src","".concat(o).concat(n)),t&&(i=t,_.attr("src","".concat(i).concat(n)))):(l.hide(),v.hide(),w.show(),A=!1,o=x,i=null,y.attr("src",o),_.removeAttr("src")),c.show(),f.hide(),p.hide()}function q(e){e.preventDefault(),d[0].value=null,d.trigger("click")}function C(e){e.preventDefault();e={user_id:b,_wpnonce:k};n.ajax.post("profile.remove_avatar",e).then(function(e){e.success&&(W(null),a.hide(),M=!1,u.attr("disabled","disable"),n.hooks.doAction("profile_avatar_updated",b,x))})}function P(e){e.preventDefault();e={user_id:b,_wpnonce:k};n.ajax.post("profile.use_gravatar",e).then(function(e){e.success&&(W(e=e.data&&e.data.image_url,e),O=M=!0,u.removeAttr("disabled"))})}function V(e){var t;e.preventDefault(),g||(M?(t={user_id:b,use_gravatar:O?1:0,_wpnonce:k},g=!0,n.ajax.post("profile.confirm_avatar",t).then(function(e){e.success&&(e=e.data&&e.data.image_url,a.hide(),M=!1,u.attr("disabled","disabled"),n.hooks.doAction("profile_avatar_updated",b,e))}).always(function(){g=!1})):T?(t=s.default.extend(T,{user_id:b,_wpnonce:k},{tmp:"",preview:""}),g=!0,n.ajax.post("profile.crop",t).then(function(e){e.success&&(e.data&&e.data.image_url,a.hide(),window.location.reload(!0))}).always(function(){g=!1})):a.hide())}function X(e){e.preventDefault(),window.ps_crop.init({elem:_,change:function(e){m=function(e,t){var n,o,i=(0,s.default)(e),a=1,r=!1;e.naturalWidth&&(n=e.naturalWidth||i.width(),o=e.naturalHeight||i.height(),(800<n||800<o)&&(a=800/Math.max(n,o),n*=a,o*=a,r=!0),a=n/i.width());t={x1:Math.floor(a*t.x),y1:Math.floor(a*t.y),x2:Math.floor(a*(t.x+t.width)),y2:Math.floor(a*(t.y+t.height))},r&&(t.width=n,t.height=o);return t}(_[0],e)}}),c.hide(),f.show(),p.show()}function F(e){e.preventDefault(),window.ps_crop.detach(_),c.show(),f.hide(),p.hide()}function z(e){e.preventDefault(),window.ps_crop.detach(_),c.show(),f.hide(),p.hide();var t={x:m.x1,y:m.y1,x2:m.x2,y2:m.y2,width:m.width,height:m.height};M?t.tmp=1:t.preview=1;e=s.default.extend(t,{user_id:b,_wpnonce:k});n.ajax.post("profile.crop",e).then(function(e){e.success&&(W(e.data.image_url),M||(T=t,u.removeAttr("disabled")))})}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(s,e,t){(function(o){(function(){"use strict";var t=n("undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null),i="undefined"!=typeof window?window.peepso:void 0!==o?o.peepso:null,e="undefined"!=typeof window?window.peepsodata:void 0!==o?o.peepsodata:null,a=n(s("./avatar-dialog"));function n(e){return e&&e.__esModule?e:{default:e}}var r=+e.profile.id;(0,t.default)(function(){var n,o,e=(0,t.default)(".ps-js-focus--profile .ps-js-avatar");e.length&&(n=e.find(".ps-js-avatar-image"),o=e.find(".ps-js-avatar-button-wrapper"),i.hooks.addAction("profile_avatar_updated","page_profile",function(e,t){+e==r&&n.attr("src",t),t.match(/\/users\/\d+\//)?(o.css("cursor",""),o.attr("onclick","peepso.simple_lightbox('".concat(t.replace("-full.","-orig."),"'); return false"))):(o.css("cursor","default"),o.removeAttr("onclick"))}),e.find(".ps-js-avatar-button").on("click",function(e){e.preventDefault(),e.stopPropagation(),(0,a.default)().show()}))})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./avatar-dialog":5}],7:[function(e,t,n){(function(t){(function(){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e,c=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},f="undefined"!=typeof window?window._:void 0!==t?t._:null,p="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,h=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=i?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=e[n])}o.default=e,t&&t.set(e,o);return o}("undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}var v,w=window.Hammer,_=+h.default.upload_size,y=+h.profile.id,m=h.profile.img_cover_default,g=h.profile.cover_nonce,j="".concat(h.default.ajaxurl_legacy,"profile.upload_cover?cover"),b=h.profile.text_error_filetype,x=h.profile.text_error_filetype,k=+h.profile.has_cover;(0,c.default)(function(){var t,o,i,n,r,s,e,a,d,l,u=(0,c.default)(".ps-js-focus--profile .ps-js-cover");u.length&&((0,c.default)(".ps-js-cover-upload").on("click",function(e){e.preventDefault(),t[0].value=null,t.trigger("click")}),e='<input type="file" name="filedata" accept="'.concat("image/*",'" data-name="').concat("profile-cover-upload",'" />'),(e=(0,c.default)(e).css({position:"absolute",opacity:0,height:1,width:1})).appendTo(document.body),e.psFileupload({formData:{user_id:y,_wpnonce:g},dataType:"json",url:j,replaceFileInput:!1,add:function(e,t){var n=t.files[0];n.type.match(/image\/(jpe?g|png)$/i)?n.size>_?alert(x):(s.css("opacity",.5),t.submit()):alert(b)},done:function(e,t){var n=t.result;n.success?(t=n.data.image_url,o.show(),i.show(),k=!0,s.attr("style","").attr("src",t+"?"+Math.random()).one("load",d),p.hooks.doAction("profile_cover_updated",y,t)):n.errors&&alert(n.errors)}}),t=e,o=(0,c.default)(".ps-js-cover-remove").on("click",function(e){e.preventDefault();var t=(0,p.dialog)(h.profile.template_cover_remove).show();t.$el.on("click",".ps-js-cancel",function(){return t.hide()}),t.$el.on("click",".ps-js-submit",function(){t.hide(),s.css("opacity",.5);var e={uid:h.currentuserid,user_id:y,_wpnonce:g};p.ajax.post("profile.remove_cover_photo",e).then(function(e){e.success&&(o.hide(),i.hide(),k=!1,s.attr("style","").attr("src",m).one("load",d),p.hooks.doAction("profile_cover_updated",y,m))})})}),i=(0,c.default)(".ps-js-cover-reposition").on("click",function(e){e.preventDefault(),s.data("style",s.attr("style")),s.css("z-index",1),u.addClass("ps-focus-cover-edit"),n.show();var i=r.width()-s.width(),a=r.height()-s.height();s.off("mousedown").on("mousedown",function(e){e.preventDefault()}),(v=new w.Manager(s[0])).add(new w.Pan({direction:w.DIRECTION_ALL,treshhold:0})),v.on("pan panstart panend",function(e){e.srcEvent.stopPropagation(),e.srcEvent.preventDefault();var t,n,o=(0,c.default)(e.target);"panstart"===e.type?(o.data("position",o.position()),o.css("cursor","move")):"pan"===e.type?(n=o.data("position"),(t={top:e.deltaY,left:e.deltaX}).left=Math.max(t.left,i-n.left),t.left=Math.min(t.left,0-n.left),t.top=Math.max(t.top,a-n.top),t.top=Math.min(t.top,0-n.top),o.css("transform","translate3d(".concat(t.left,"px, ").concat(t.top,"px, 0)"))):(t=100*(n=o.position()).left/r.width(),n=100*n.top/r.height(),t=Math.ceil(1e4*t)/1e4,n=Math.ceil(1e4*n)/1e4,o.css({top:"".concat(n,"%"),left:"".concat(t,"%"),transform:""}),o.removeData("position"),o.data({reposX:t,reposY:n}),o.css("cursor",""))})}),n=(0,c.default)(".ps-js-cover-reposition-actions").hide(),(0,c.default)(".ps-js-cover-reposition-cancel").on("click",function(e){e.preventDefault(),v.destroy(),v=null,u.removeClass("ps-focus-cover-edit"),n.hide(),s.css("z-index",""),s.attr("style",s.data("style")).removeData("style")}),(0,c.default)(".ps-js-cover-reposition-confirm").on("click",function(e){e.preventDefault(),v.destroy(),v=null,u.removeClass("ps-focus-cover-edit"),n.hide(),s.css("z-index","");e={user_id:y,_wpnonce:g,y:s.data("reposX"),x:s.data("reposY")};p.ajax.post("profile.reposition_cover",e)}),r=u.find(".ps-js-cover-wrapper"),s=u.find(".ps-js-cover-image"),k||(i.hide(),o.hide()),d=function(){s.css({height:"auto",width:"100%",minWidth:"100%",maxWidth:"100%"});var e=r.height(),t=r.width(),n=s.height(),o=s.width();n<e&&(s.css({height:"100%",width:"auto",minWidth:"100%",maxWidth:"none"}),n=s.height(),o=s.width());var i=parseFloat(s[0].style.top)||0;e<=n&&i<(a=(n-e)/e*-100)&&s.css("top","".concat(a,"%"));var a,e=parseFloat(s[0].style.left)||0;t<=o&&e<(a=(o-t)/t*-100)&&s.css("left","".concat(a,"%")),s.css("opacity","")},d=(0,f.throttle)(d,500),s.each(function(){var e=new Image;e.onload=d,e.src=this.src}),p.hooks.addAction("browser_resize","profile_cover",function(e){a&&a===e.width||(a=e.width,d())}),(l=(0,c.default)(".ps-js-cover-button-popup")).on("click",function(e){e.currentTarget!==e.target||(e=(0,c.default)(this).data("cover-url"))&&peepso.simple_lightbox(e)}),p.hooks.addAction("profile_cover_updated","page_profile",function(e,t){+e==y&&(-1<t.indexOf("/users/".concat(e,"/"))?(l.css("cursor","pointer"),l.data("cover-url",t)):(l.css("cursor",""),l.removeData("cover-url")))}))})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){"use strict";e("./avatar"),e("./cover")},{"./avatar":6,"./cover":7}],9:[function(e,t,n){"use strict";e("./header"),e("./profile"),e("./about"),e("./profile-extended")},{"./about":3,"./header":8,"./profile":11,"./profile-extended":10}],10:[function(e,t,n){"use strict";jQuery(function(n){var o=".ps-js-profile-separator",e=n(".ps-js-profile-list");e.length&&e.find(o).closest(".ps-js-profile-item").each(function(){var e=n(this),t=e.next();return!t.length||t.find(o).length?(e.remove(),!0):void 0})})},{}],11:[function(e,t,n){(function(n){(function(){"use strict";"undefined"!=typeof window||void 0!==n&&n.peepso;function e(){this.cover={},this.cover.x_position_percent=0,this.cover.y_position_percent=0,this.$cover_ct=jQuery(".js-focus-cover"),this.$cover_image=jQuery("img#"+peepsodata.userid),this.initial_cover_position=this.$cover_image.attr("style"),this.avatar_use_gravatar=!1}var t=window.profile=new e;e.prototype.init=function(){var e=jQuery(".js-collapse-about-btn");0!==e.length&&e.on("click",function(e){e.preventDefault();e=jQuery(".js-collapse-about");"none"===e.css("display")?e.show():e.hide()}),jQuery(".js-focus-cover").hover(function(){!1===pswindow.is_visible&&jQuery(".js-focus-change-cover").show()},function(){jQuery(".js-focus-change-cover").hide()}),jQuery(".ps-tab__bar").unbind("click");e=jQuery(".ps-js-page-about-preferences");e.length&&(e.find("input[type=checkbox]").on("click.savepref",t.save_preference),e.find("select").on("change.savepref",t.save_preference),e.find(".ps-js-dropdown input[type=hidden]").on("change",t.save_preference),e.find(".ps-preferences__checkbox").find("input[type=checkbox]").off("click.savepref"));e=jQuery(".ps-js-profile-item");e.length&&e.each(function(){var e,t=jQuery(this);t.find(".peepso-markdown").length&&(e=peepso.observer.applyFilters("peepso_parse_content",t.html()),t.html(e))})},e.prototype.activate_tab=function(e,t,n){return e.preventDefault(),jQuery(e.target).addClass("active").siblings("[data-toggle=tab]").removeClass("active"),jQuery(n).hide(),jQuery(t).show(),!1},e.prototype.new_like=function(){return peepso.postJson("profile.like",{user_id:peepsodata.userid},function(e){var t,n;e.success?(t=(n=e.data||{}).html,n=n.like_count,jQuery(".ps-js-focus-interactions").html(t),void 0!==n&&peepso.observer.doAction("profile_update_like",peepsodata.userid,n)):psmessage.show("",e.errors[0]).fade_out(psmessage.fade_time)}),!1},e.prototype.unblock_user=function(t,e){this.unblocking_user||(e&&(e=jQuery(e)).find("img").css("display","inline"),e={uid:peepsodata.currentuserid,user_id:t},this.unblocking_user=!0,peepso.postJson("activity.unblockuser",e,jQuery.proxy(function(e){this.unblocking_user=!1,e.success&&(jQuery(".ps-js-focus--"+t).find(".ps-js-focus-actions").html(e.data.actions),psmessage.show(e.data.header,e.data.message,psmessage.fade_time))},this)))},e.prototype.delete_profile=function(){var e=jQuery("#profile-delete-title").html(),t=jQuery("#profile-delete-content").html();pswindow.show(e,t)},e.prototype.delete_profile_action=function(){$req={};var e={uid:peepsodata.currentuserid};peepso.postJson("profile.delete_profile",e,function(e){e.success?window.location=e.data.url:psmessage.show("",e.errors[0]).fade_out(psmessage.fade_time)})},e.prototype.field_changed=function(e,t){e=jQuery(e).data("id");return this.field_changed_list||(this.field_changed_list=[]),-1===this.field_changed_list.indexOf(e)&&this.field_changed_list.push(e),this.change_beforeunload(),!0},e.prototype.change_beforeunload=function(){var e;this.onbeforeunload_changed||((e=this).onbeforeunload_changed=window.onbeforeunload||function(){},window.onbeforeunload=function(){return e.save_field_saving?peepsodata.profile_saving_notice||"The system is currently saving your changes.":e.field_changed_list.length?peepsodata.profile_unsaved_notice||"There are unsaved changes on this page.":void 0})},e.prototype.change_privacy=function(e){var t=jQuery(e),n=t.closest(".ps-js-dropdown"),o=n.find(".ps-js-dropdown-toggle"),i=n.find("input[type=hidden]"),a={},r="[class*=gci-]",s=".ps-privacy-title",d=i.data("id"),l=(i.val(),o.find(r).attr("class")),u=o.find(s).html(),c=t.data("optionValue"),e=t.find(r).attr("class"),n=t.find("span").html();t.parent().children("[data-option-value]").each(function(){var e=jQuery(this),t=e.data("optionValue"),e=e.find(r).attr("class");a[t]=e}),o.find(r).attr("class",e),o.find(s).html(n),peepso.postJson("profilefieldsajax.save_acc",{user_id:peepsodata.currentuserid,view_user_id:peepsodata.userid,id:d,acc:c},function(e){e.success?i.val(c):(o.find(r).attr("class",l),o.find(s).html(u))})},e.prototype.use_gravatar=function(){var o=this;peepso.postJson("profile.use_gravatar",{},function(e){var t,n;e.success&&(t=jQuery("#dialog-upload-avatar-content",jQuery(e.data.html)),n=jQuery("#dialog-upload-avatar .dialog-action").html(),Math.random(),e=(e=e.data.image_url)+(0<=e.indexOf("?")?"&rand=":"?rand=")+Math.random(),jQuery(".js-focus-avatar img",t).attr("src",e),jQuery(".imagePreview img",t).attr("src",e),jQuery(".imagePreview",t).after('<input type="hidden" name="is_tmp" value="1"/>'),jQuery(".ps-js-has-avatar",t).show(),jQuery(".ps-js-no-avatar",t).hide(),jQuery(".ps-js-crop-avatar",t).hide(),pswindow.set_content(t),pswindow.set_actions(n),jQuery("#imagePreview img").one("load",function(){pswindow.refresh()}),o.init_avatar_fileupload(),jQuery("#ps-window button[name=rep_submit]").removeAttr("disabled").addClass("ps-btn-primary"),o.invalid_avatar_upload=!1,o.avatar_use_gravatar=!0)})},e.prototype.save_preference=function(e){var t=jQuery(e&&e.target?e.target:e),n=t.closest(".ps-js-profile-preferences-option").find(".ps-js-loading"),e={};e.user_id=peepsodata.currentuserid,e.view_user_id=peepsodata.userid,e.meta_key=t.attr("name"),e.value=t.is(":checkbox")?t[0].checked?1:0:t.val(),n.find("i").stop().hide(),n.find("img").show(),peepso.postJson("profilepreferencesajax.savepreference",e,function(e){n.find("img").hide(),n.find("i").show().delay(800).fadeOut()})},e.prototype.save_notification=function(e){var t=jQuery(e&&e.target?e.target:e),n=t.closest(".ps-js-notification-option").find(".ps-js-loading"),e={};e.user_id=peepsodata.currentuserid,e.view_user_id=peepsodata.userid,e.fieldname=t.attr("name"),e.value=t.is(":checkbox")?t[0].checked?1:0:t.val(),n.find("i").stop().hide(),n.find("img").show(),peepso.postJson("profilepreferencesajax.save_notifications",e,function(e){n.find("img").hide(),n.find("i").show().delay(800).fadeOut(),e.success})},jQuery(function(){t.init()})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,f,t){(function(c){(function(){"use strict";function e(e){o.length||(t(),0),o[o.length]=e}f.exports=e;var t,o=[],i=0;function n(){for(;i<o.length;){var e=i;if(i+=1,o[e].call(),1024<i){for(var t=0,n=o.length-i;t<n;t++)o[t]=o[t+i];o.length-=i,i=0}}o.length=0,i=0,0}var a,r,s,d=void 0!==c?c:self,l=d.MutationObserver||d.WebKitMutationObserver;function u(o){return function(){var e=setTimeout(n,0),t=setInterval(n,50);function n(){clearTimeout(e),clearInterval(t),o()}}}t="function"==typeof l?(r=1,a=new l(a=n),s=document.createTextNode(""),a.observe(s,{characterData:!0}),function(){r=-r,s.data=r}):u(n),e.requestFlush=t,e.makeRequestCallFromTimer=u}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t,n){"use strict";var i=e("asap/raw");function r(){}var a=null,s={};function d(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,e!==r&&p(e,this)}function l(e,t){for(;3===e._V;)e=e._W;if(d._Y&&d._Y(e),0===e._V)return 0===e._U?(e._U=1,void(e._X=t)):1===e._U?(e._U=2,void(e._X=[e._X,t])):void e._X.push(t);var n,o;n=e,o=t,i(function(){var e=1===n._V?o.onFulfilled:o.onRejected;null!==e?(e=function(e,t){try{return e(t)}catch(e){return a=e,s}}(e,n._W))===s?c(o.promise,a):u(o.promise,e):(1===n._V?u:c)(o.promise,n._W)})}function u(e,t){if(t===e)return c(e,new TypeError("A promise cannot be resolved with itself.")),0;if(t&&("object"==typeof t||"function"==typeof t)){var n=function(e){try{return e.then}catch(e){return a=e,s}}(t);if(n===s)return c(e,a),0;if(n===e.then&&t instanceof d)return e._V=3,e._W=t,void o(e);if("function"==typeof n)return void p(n.bind(t),e)}e._V=1,e._W=t,o(e)}function c(e,t){e._V=2,e._W=t,d._Z&&d._Z(e,t),o(e)}function o(e){if(1===e._U&&(l(e,e._X),e._X=null),2===e._U){for(var t=0;t<e._X.length;t++)l(e,e._X[t]);e._X=null}}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function p(e,t){var n=!1,e=function(e,t,n){try{e(t,n)}catch(e){return a=e,s}}(e,function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,c(t,e))});n||e!==s||(n=!0,c(t,a))}(t.exports=d)._Y=null,d._Z=null,d._0=r,d.prototype.then=function(e,t){if(this.constructor!==d)return i=e,a=t,new(o=this).constructor(function(e,t){var n=new d(r);n.then(e,t),l(o,new f(i,a,n))});var o,i,a,n=new d(r);return l(this,new f(e,t,n)),n}},{"asap/raw":12}],14:[function(e,t,n){"use strict";var d=e("./core.js");t.exports=d;var o=u(!0),i=u(!1),a=u(null),r=u(void 0),s=u(0),l=u("");function u(e){var t=new d(d._0);return t._V=1,t._W=e,t}d.resolve=function(e){if(e instanceof d)return e;if(null===e)return a;if(void 0===e)return r;if(!0===e)return o;if(!1===e)return i;if(0===e)return s;if(""===e)return l;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new d(t.bind(e))}catch(n){return new d(function(e,t){t(n)})}return u(e)};var c=function(e){return"function"==typeof Array.from?(c=Array.from,Array.from(e)):(c=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(e))};d.all=function(e){var s=c(e);return new d(function(i,a){if(0===s.length)return i([]);var r=s.length;for(var e=0;e<s.length;e++)!function t(n,e){if(e&&("object"==typeof e||"function"==typeof e)){if(e instanceof d&&e.then===d.prototype.then){for(;3===e._V;)e=e._W;return 1===e._V?t(n,e._W):(2===e._V&&a(e._W),void e.then(function(e){t(n,e)},a))}var o=e.then;if("function"==typeof o)return void new d(o.bind(e)).then(function(e){t(n,e)},a)}s[n]=e,0==--r&&i(s)}(e,s[e])})},d.reject=function(n){return new d(function(e,t){t(n)})},d.race=function(e){return new d(function(t,n){c(e).forEach(function(e){d.resolve(e).then(t,n)})})},d.prototype.catch=function(e){return this.then(null,e)}},{"./core.js":13}]},{},[9]);