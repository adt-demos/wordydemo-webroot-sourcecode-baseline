!function a(l,o,d){function f(t,e){if(!o[t]){if(!l[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=o[t]={exports:{}};l[t][0].call(r.exports,function(e){return f(l[t][1][e]||e)},r,r.exports,a,l,o,d)}return o[t].exports}for(var s="function"==typeof require&&require,e=0;e<d.length;e++)f(d[e]);return f}({1:[function(e,t,n){"use strict";var i,r=(i=e("./profile"))&&i.__esModule?i:{default:i};document.addEventListener("DOMContentLoaded",function(){r.default.init()})},{"./profile":3}],2:[function(e,t,f){(function(e){"use strict";Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var h=t("undefined"!=typeof window?window._:void 0!==e?e._:null),a=t("undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null),y="undefined"!=typeof window?window.peepso:void 0!==e?e.peepso:null,m="undefined"!=typeof window?window.peepsodata:void 0!==e?e.peepsodata:null;function t(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=m.sections&&m.sections.profile&&m.sections.profile.textSaveAllErrorNotice,n=function(){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.$container=(0,a.default)(e),this.$btnEditAll=this.$container.find(".ps-js-btn-edit-all"),this.$btnSaveAll=this.$container.find(".ps-js-btn-save-all").hide(),this.$fields=this.$container.find(".ps-js-profile-item").filter(function(){return!(0,a.default)(this).find(".ps-js-profile-separator").length}),this.$fields.length||this.$btnEditAll.hide(),this.$fields.each(function(e,t){return n.fieldInit(t)}),this.fieldChanged=[],this.fieldChangedHandler=function(e){return!!n.fieldChanged.length||e},y.observer.addFilter("beforeunload",this.fieldChangedHandler,10,1),this.$btnEditAll.on("click",function(){return n.fieldsEditAll()}),this.$btnSaveAll.on("click",function(){return n.fieldsSaveAll()})}var e,n,i;return e=t,(n=[{key:"fieldInit",value:function(e){var t=this;(0,a.default)(e).on("click",".ps-js-btn-edit",function(){return t.fieldEdit(e)}).on("click",".ps-js-btn-cancel",function(){return t.fieldEditCancel(e)}).on("click",".ps-js-btn-save",function(){return t.fieldEditSave(e)})}},{key:"fieldGetData",value:function(e){var t,n,i,r=(0,a.default)(e).closest(".ps-js-profile-item");return r.length&&((i=r.data()).$field||(n=(t=r.find(".ps-list-info-content-form")).find("input[type=text],input[type=checkbox],input[type=radio],textarea,select"),i={$field:r,$label:r.find(".ps-list-info-content-text"),$form:r.find(".ps-list-info-content-form"),$error:r.find(".ps-list-info-content-error"),$validation:r.find(".ps-js-validation"),$inputs:n,$btnEdit:r.find(".ps-js-btn-edit"),$btnCancel:t.find(".ps-js-btn-cancel"),$btnSave:t.find(".ps-js-btn-save"),id:n.data("id"),type:this.fieldGetType(n),value:this.fieldGetValue(n)},r.data(i))),i}},{key:"fieldGetType",value:function(e){var t=e.eq(0),n=t.prop("tagName").toLowerCase(),i=t.attr("type")||"";return-1<["select","textarea"].indexOf(n)?i=n:"text"===i&&t.hasClass("datepicker")&&(i="datepicker"),i}},{key:"fieldGetValue",value:function(e){var t,n=this.fieldGetType(e),i="checkbox"===n?(i=e.filter(":checked").map(function(e,t){return t.value}),JSON.stringify(r(i))):"radio"===n?e.filter(":checked").val():"datepicker"===n?(t=e.val(),{value:i=e.data("value"),formatted:t}):e.val();return i}},{key:"fieldSetValue",value:function(e,n){var t=this.fieldGetType(e);"checkbox"===t?(n=JSON.parse(n),e.each(function(e,t){t.checked=-1<n.indexOf(t.value)})):"radio"===t?e.each(function(e,t){t.checked=t.value===n}):"datepicker"===t?(e.val(n.formatted),e.data("value",n.value)):e.val(n)}},{key:"fieldEdit",value:function(e,t){var n=this,i=1<arguments.length&&void 0!==t&&t,r=this.fieldGetData(e),a=r.$label,l=r.$form,o=r.$error,d=r.$validation,f=r.$inputs,s=r.id,u=r.type;"text"===u&&f.off("keydown").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),n.fieldEditSave(e.target))});var c,p=function(){};-1<["text","textarea"].indexOf(u)&&((c=f.next(".ps-js-counter")).length&&(c.show(),(p=h.default.throttle(function(e){return c.html(e)},500))(f.val().length))),f.off("input.ps-field").on("input.ps-field",function(e){-1===n.fieldChanged.indexOf(s)&&n.fieldChanged.push(s),p(e.target.value.length)}),a.hide(),l.show(),o.hide(),d.addClass("ps-alert--neutral").removeClass("ps-alert--abort"),i||-1===["checkbox","radio"].indexOf(u)&&f.focus()}},{key:"fieldEditCancel",value:function(e){var t=this.fieldGetData(e),n=t.$label,i=t.$form,r=t.$error,a=t.$inputs,l=t.id,o=t.value;this.fieldSetValue(a,o),n.show(),i.hide(),r.hide();var d=this.fieldChanged.indexOf(l);-1<d&&this.fieldChanged.splice(d,1)}},{key:"fieldEditSave",value:function(e){var r=this,a=this.fieldGetData(e),l=a.$field,o=a.$label,d=a.$form,f=a.$error,s=a.$inputs,i=a.$btnCancel,u=a.$btnSave,c=a.id,p=a.type,h=u.find("img"),v=this.fieldGetValue(s);s.attr("disabled","disabled"),u.add(i).attr("disabled","disabled"),h.show(),"datepicker"===p&&(v=v.value),v=y.observer.applyFilters("profile_field_save",v,s);function b(e){var t=e.display_value,n=o.find(".ps-list-info-content-data");a.value=v,void 0!==t?(t=y.observer.applyFilters("peepso_parse_content",t),n.html(t)):"select"===p?n.html(s.find("option:selected").text()):n.html(s.val()),o.show(),d.hide(),f.hide(),l.addClass("ps-list-info-success"),setTimeout(function(){return l.removeClass("ps-list-info-success")},1e3),y.observer.doAction("profile_field_updated",a,e),y.hooks.doAction("profile_completeness_updated",m.userid,e);var i=r.fieldChanged.indexOf(c);-1<i&&r.fieldChanged.splice(i,1)}return new y.Promise(function(e,t){var n=!1;y.modules.user.updateField(m.userid,c,v).then(b).catch(function(e){!function(e){var t=[];if(a.$validation.addClass("ps-alert--neutral").removeClass("ps-alert--abort"),e)for(var n in e){var i=d.find(".ps-js-validation-"+n);i.length?i.addClass("ps-alert--abort").removeClass("ps-alert--neutral"):t.push(e[n])}t.length?(t=t.join("<br>"),f.html(t).show()):f.hide(),l.addClass("ps-list-info-error"),setTimeout(function(){return l.removeClass("ps-list-info-error")},1e3)}(e),n=!0}).then(function(){s.removeAttr("disabled"),u.add(i).removeAttr("disabled"),h.hide(),n?t(l[0]):e()})})}},{key:"fieldsEditAll",value:function(){var n=this;this.$btnEditAll.hide(),this.$btnSaveAll.show(),this.$fields.each(function(e,t){n.fieldEdit(t,"nofocus")})}},{key:"fieldsSaveAll",value:function(){var r=this;this.$btnSaveAll.attr("disabled","disabled");var n=[];this.$fields.each(function(e,t){n.push(r.fieldEditSave(t))}),y.Promise.all(n.map(function(e){return e.catch(function(e){return e})})).then(function(e){var t,n,i=e.filter(function(e){return e});r.$btnSaveAll.removeAttr("disabled"),i.length?(t=(0,a.default)(i[0]).offset().top-window.innerHeight/2,n=h.default.debounce(function(){return alert(o)},200),(0,a.default)("html, body").animate({scrollTop:t},1e3,n)):(r.$btnSaveAll.hide(),r.$btnEditAll.show())})}}])&&l(e.prototype,n),i&&l(e,i),t}(),d={init:function(){var e=document.querySelectorAll('[data-ps-section="profile/about"]');e.length&&r(e).forEach(function(e){return new n(e)})}};f.default=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("./about"))&&i.__esModule?i:{default:i};var a={init:function(){r.default.init()}};n.default=a},{"./about":2}]},{},[1]);