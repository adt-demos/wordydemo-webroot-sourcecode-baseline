!function o(i,a,r){function d(t,e){if(!a[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=a[t]={exports:{}},i[t][0].call(n.exports,function(e){return d(i[t][1][e]||e)},n,n.exports,o,i,a,r)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<r.length;e++)d(r[e]);return d}({1:[function(e,t,n){(function(t){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;"undefined"!=typeof window||void 0!==t&&t.peepso;function e(e,t){e instanceof Element&&function(e,t){var n=1<arguments.length&&void 0!==t?t:{};e.addEventListener("dragover",function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}),e.addEventListener("drop",function(e){e.preventDefault();e=e.dataTransfer.files;e&&e.length&&"function"==typeof n.dropped&&n.dropped(e)})}(e,t)}n.default=e}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,y){(function(p){(function(){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var e,t="undefined"!=typeof window?window.peepso:void 0!==p?p.peepso:null;function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var n=((e="undefined"!=typeof window?window.peepsodata:void 0!==p?p.peepsodata:null)&&e.__esModule?e:{default:e}).default.hashtags||{},a=n.url,r=+n.everything||0,d=!r&&+n.min_length||0,u=!r&&+n.max_length||1e4,l=(c=r?"(^|>|\\s)(#([^#\\s<]+))":"(^|>|\\s)(#("+((c=!r&&+n.must_start_with_letter||0)?"[a-z]":"")+"[a-z0-9]{"+Math.max(0,d-(c?1:0))+","+Math.max(0,u-(c?1:0))+"}))",new RegExp(c,"ig")),s=["a","area","audio","base","br","button","code","col","embed","frame","hr","iframe","img","input","keygen","link","meta","param","script","select","source","style","textarea","track","video","wbr"];function f(e){var t=e.querySelectorAll("*");(t=[e].concat(i(t))).forEach(function(e){var o;-1<s.indexOf(e.tagName.toLowerCase())||(o=i(e.childNodes)).forEach(function(e){var t,n;3===e.nodeType&&(n=e.textContent).trim()&&n.match(l)&&((t=document.createElement("div")).innerHTML=((n=n).match(l)&&(n=n.replace(l,function(e,t,n,o){return"".concat(t,'<a href="').concat(a).concat(o,'/"><span class="ps-stream-hashtag">').concat(n,"</span></a>")})),n),e.replaceWith.apply(e,t.childNodes),o=o.concat(i(t.childNodes)))})})}var c={init:function(){n.url&&(t.observer.addFilter("peepso_activity",function(e){return e.map(function(){var e;return 1===this.nodeType&&((e=this.querySelectorAll(".ps-js-activity-content, .ps-js-activity-extras, .ps-js-activity-quote, .ps-comment__content")).length||(e=[this]),e.forEach(f)),this})},10,1),jQuery(".peepso-wp-post-hashtags").each(function(){f(this)}))}};y.default=c}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(l,e,t){(function(u){(function(){"use strict";var e=d("undefined"!=typeof window?window.jQuery:void 0!==u?u.jQuery:null),t=d("undefined"!=typeof window?window.peepso:void 0!==u?u.peepso:null),n=d(l("./droppable")),o=d(l("./post")),i=d(l("./hashtag")),a=d(l("./mention")),r=d(l("./permalink"));function d(e){return e&&e.__esModule?e:{default:e}}t.default.elements={droppable:n.default},(0,e.default)(function(){o.default.init(),i.default.init(),a.default.init(),r.default.init()})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./droppable":1,"./hashtag":2,"./mention":4,"./permalink":5,"./post":7}],4:[function(e,t,m){(function(h){(function(){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var e,t=(e="undefined"!=typeof window?window.jQuery:void 0!==h?h.jQuery:null)&&e.__esModule?e:{default:e},i="undefined"!=typeof window?window.peepso:void 0!==h?h.peepso:null;function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,i=!1,a=void 0;try{for(var r,d=e[Symbol.iterator]();!(o=(r=d.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==d.return||d.return()}finally{if(i)throw a}}return n}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var d=/@peepso_([a-z]+)_(\d+)(?:\(([^\)]+)\))?/g,u=["a","area","audio","base","br","button","code","col","embed","frame","hr","iframe","img","input","keygen","link","meta","param","script","select","source","style","textarea","track","video","wbr"],l=0;function s(e){return e.match(d)&&(e=e.replace(d,function(e,t,n,o){var i="ps-tag__link ps-js-mention-".concat(++l),e='<a class="'.concat(i,'">').concat(o||e,"</a>");return i=i,o=[t,n,o],p?y.push({elements:i,params:o}):c(i,o),e})),e}function f(e){var t=e.querySelectorAll("*");(t=[e].concat(r(t))).forEach(function(e){var o;-1<u.indexOf(e.tagName.toLowerCase())||(o=r(e.childNodes)).forEach(function(e){var t,n;3===e.nodeType&&(t=e.textContent).trim()&&t.match(d)&&((n=document.createElement("div")).innerHTML=s(t),e.replaceWith.apply(e,n.childNodes),o=o.concat(r(n.childNodes)))})})}function c(e,t){var n=a(t,3),o=n[0],t=n[1],n=n[2];i.modules.mention.getHtml(o,t,n).then(function(n){(e=r(document.getElementsByClassName(e))).forEach(function(t){var e=document.createElement("div");e.innerHTML=n,r(e.childNodes).forEach(function(e){t.parentNode.insertBefore(e,t)}),t.parentNode.removeChild(t)})})}var p=!0,y=[];var v={init:function(){i.observer.addFilter("peepso_activity",function(e){return e.map(function(){return 1===this.nodeType&&f(this),this})},10,1),(0,t.default)(function(){f(document.body),setTimeout(function(){for(p=!1;y.length;){var e=y.shift();c(e.elements,e.params)}},3e3)})}};m.default=v}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,r){(function(a){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e,n=(e="undefined"!=typeof window?window.jQuery:void 0!==a?a.jQuery:null)&&e.__esModule?e:{default:e},t="undefined"!=typeof window?window.peepso:void 0!==a?a.peepso:null;function o(){(0,n.default)(".ps-js-permalink").each(function(){var e=(0,n.default)(this);e.removeClass("ps-js-permalink"),e.on("click",function(e){e.preventDefault(),e.stopPropagation();var t=(0,n.default)(this),e=t.closest("a[href]");e.length&&(peepso.util.copyToClipboard(e.attr("href")),t.attr("data-tooltip",t.data("tooltip-success")))}),e.on("mouseleave",function(){var e=(0,n.default)(this),t=e.data("tooltip-initial");t!==e.attr("data-tooltip")&&e.attr("data-tooltip",t)})})}var i={init:function(){(0,n.default)(function(){setTimeout(o,1e3)}),t.observer.addFilter("peepso_activity",function(e){return setTimeout(o,1e3),e},10,1)}};r.default=i}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,i){(function(o){(function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e,a=(e="undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null)&&e.__esModule?e:{default:e},r="undefined"!=typeof window?window.peepso:void 0!==o?o.peepso:null,d="undefined"!=typeof window?window.peepsodata:void 0!==o?o.peepsodata:null;function n(e,t){var n,o,i=(0,a.default)(e);t||(o=i.find(".ps-js-post-body input[name=peepso_set_human_friendly]")).length&&(t=o.val(),o.remove()),+t&&(+d.is_admin||+i.data("author")==+d.currentuserid)&&r.modules.post.setHumanReadable(+t,(n=e,o=(0,a.default)(n),t=o.find(".ps-js-post-body .ps-js-activity-content"),e=t.get(0).innerText.trim(),(n=r.observer.applyFilters("human_friendly_extras",[],e,n)).length&&(e&&n.unshift(e),e=n.join(". ")),e||(t=o.find(".ps-js-post-header .ps-stream-action-title")).length&&(e=t.get(0).innerText.trim()),e=e.replace(/\r?\n/g," ")));i=i.find(".ps-js-comment-item");i.length&&i.each(function(){u(this)})}function u(e,t){var n,o=(0,a.default)(e);t||(n=o.find(".ps-js-comment-body").eq(0).find("input[name=peepso_set_human_friendly]")).length&&(t=n.val(),n.remove()),+t&&(+d.is_admin||+o.data("author")==+d.currentuserid)&&r.modules.post.setHumanReadable(+t,(t=e,e=(0,a.default)(t).find(".ps-js-comment-body .ps-js-comment-content").get(0).innerText.trim(),(t=r.observer.applyFilters("human_friendly_extras",[],e,t)).length&&(e&&t.unshift(e),e=t.join(". ")),e=e.replace(/\r?\n/g," ")))}r.hooks.addAction("post_added","human_readable",n),r.hooks.addAction("post_updated","human_readable",function(e){var t=(0,a.default)(e).data("post-id");t&&n(e,t)}),r.hooks.addAction("comment_added","human_readable",u),r.hooks.addAction("comment_updated","human_readable",function(e){var t=(0,a.default)(e).data("comment-id");t&&u(e,t)});var t={init:function(){}};i.default=t}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=d(e("./save")),i=d(e("./track")),a=d(e("./human")),r=d(e("./link-target"));function d(e){return e&&e.__esModule?e:{default:e}}e={init:function(){o.default.init(),i.default.init(),a.default.init(),r.default.init()}};n.default=e},{"./human":6,"./link-target":8,"./save":9,"./track":10}],8:[function(e,t,a){(function(i){(function(){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e,n=(e="undefined"!=typeof window?window.jQuery:void 0!==i?i.jQuery:null)&&e.__esModule?e:{default:e},o="undefined"!=typeof window?window.peepso:void 0!==i?i.peepso:null;var t={init:function(){o.observer.addFilter("peepso_activity_content",function(e){return t=e,e=(0,n.default)("<div/>").append(t),(t=e.find(".ps-js-post-body").length?e.find(".ps-js-post-body a[href]"):e.find(".ps-js-comment-body").length?e.find(".ps-js-comment-content a[href]").add(e.find(".ps-js-comment-attachment a[href]")):e.find("a[href]")).each(function(){var e=(0,n.default)(this),t=o.modules.url.getTarget(e.attr("href"),!1);t?e.attr("target",t):e.removeAttr("target")}),e.html();var t},10,1)}};a.default=t}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,y){(function(p){(function(){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var e,i=(e="undefined"!=typeof window?window.jQuery:void 0!==p?p.jQuery:null)&&e.__esModule?e:{default:e},a="undefined"!=typeof window?window.peepso:void 0!==p?p.peepso:null,t="undefined"!=typeof window?window.peepsodata:void 0!==p?p.peepsodata:null;var t=t.elements&&t.elements.post||{},r=t.text_save,d=t.text_saved,u=t.html_saved_notice,l=null;function s(e){e.style.opacity=.3,e.removeEventListener("click",n)}function f(e,t){t=1<arguments.length&&void 0!==t?t:{};e.style.opacity="",e.addEventListener("click",n),+t.saved&&e.setAttribute("data-object-id",t.id)}function c(e,t){var n=e.querySelector("i"),o=e.querySelector("span");t?(e.setAttribute("data-saved","1"),n.className="gcis gci-bookmark",o.innerHTML=d):(e.removeAttribute("data-saved"),n.className="gcir gci-bookmark",o.innerHTML=r)}function n(e){var n=e.currentTarget,t=+n.getAttribute("data-saved"),o=+n.getAttribute(t?"data-object-id":"data-stream-id");e.preventDefault(),e.stopPropagation(),s(n),c(n,!t),a.modules.post.save(o,!t).then(function(e){var t=!1;f(n,e),e.saved&&(t=a.observer.applyFilters("post_saved_notice",!0)),t?(e=(0,i.default)(n).offset(),t=(0,i.default)(n).height(),l||((l=(0,i.default)("<div/>").html(u)).css({position:"absolute"}),l.appendTo(document.body)),l.stop().show(),l.css({top:Math.round(e.top-l.height()/2+t/2),left:Math.round(e.left-l.width()-10)}),l.delay(2e3).fadeOut()):l&&l.stop().hide()})}function o(e){var t=e.querySelector(".ps-js-save-toggle");t&&(s(t),(e=+t.getAttribute("data-stream-id"))&&a.modules.post.save(e).then(function(e){f(t,e),c(t,!!e.saved)}))}t={init:function(){a.observer.addFilter("peepso_activity",function(e){return e.map(function(){var e,t;return 1===this.nodeType&&(!(t=(e=this).querySelector(".js-stream-actions"))||(e=t.querySelector(".ps-js-save-toggle"))&&(!e.closest||e.closest(".ps-js-activity")?o(t):e.remove())),this})},10,1),a.observer.addAction("peepso_activity_actions",function(e){e.map(function(){return 1===this.nodeType&&o(this),this})},10,1)}};y.default=t}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,u){(function(d){(function(){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var e,n=(e="undefined"!=typeof window?window.jQuery:void 0!==d?d.jQuery:null)&&e.__esModule?e:{default:e},t="undefined"!=typeof window?window._:void 0!==d?d._:null,o="undefined"!=typeof window?window.peepso:void 0!==d?d.peepso:null,i="undefined"!=typeof window?window.peepsodata:void 0!==d?d.peepsodata:null;var a=[],r=(0,t.debounce)(function(){if(a.length)for(var e=a.length-1;0<=e;e--){var t=a[e];o.util.isElementPartlyInViewport(t)&&((t=(0,n.default)(t).closest(".ps-js-activity")).length&&(t=t.data("id"),o.modules.post.trackView(t)),a.splice(e,1))}},1e3);t={init:function(){+i.currentuserid&&((0,n.default)(window).on("scroll",r),o.observer.addFilter("peepso_activity",function(e){return e.map(function(){var e;return 1===this.nodeType&&(e=this,a.push(e),r()),this})},10,1))}};u.default=t}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[3]);